{% extends 'base.html' %}

{% block title %}Home - PreVaxa{% endblock %}

{% block content %}
<h1 style="color:#93c572; text-align:center;">Vaccination Coverage Map</h1>

<!-- Map Container -->
<div id="map" style="height: 500px; width: 100%; border: 2px solid #93c572; border-radius: 8px; margin: 20px auto;"></div>

<!-- Leaflet CSS & JS for map -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
// Initialize the map after page load
document.addEventListener('DOMContentLoaded', () => {
    const map = L.map('map').setView([22.9734, 78.6569], 5); // Center on India

    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);

    // Major Indian cities and vaccination centers
    const cities = [
        { name: "Delhi", lat: 28.6139, lon: 77.2090 },
        { name: "Mumbai", lat: 19.0760, lon: 72.8777 },
        { name: "Chennai", lat: 13.0827, lon: 80.2707 },
        { name: "Kolkata", lat: 22.5726, lon: 88.3639 },
        { name: "Bangalore", lat: 12.9716, lon: 77.5946 },
        { name: "Hyderabad", lat: 17.3850, lon: 78.4867 },
        { name: "Ahmedabad", lat: 23.0225, lon: 72.5714 },
        { name: "Pune", lat: 18.5204, lon: 73.8567 },
        { name: "Surat", lat: 21.1702, lon: 72.8311 },
        { name: "Jaipur", lat: 26.9124, lon: 75.7873 },
        { name: "Lucknow", lat: 26.8467, lon: 80.9462 },
        { name: "Kanpur", lat: 26.4499, lon: 80.3319 },
        { name: "Nagpur", lat: 21.1458, lon: 79.0882 },
        { name: "Indore", lat: 22.7196, lon: 75.8577 },
        { name: "Thane", lat: 19.2183, lon: 72.9781 },
        { name: "Bhopal", lat: 23.2599, lon: 77.4126 },
        { name: "Visakhapatnam", lat: 17.6868, lon: 83.2185 },
        { name: "Pimpri-Chinchwad", lat: 18.6298, lon: 73.7997 },
        { name: "Patna", lat: 25.5941, lon: 85.1376 },
        { name: "Vadodara", lat: 22.3072, lon: 73.1812 },
        { name: "Ghaziabad", lat: 28.6692, lon: 77.4538 },
        { name: "Ludhiana", lat: 30.9010, lon: 75.8573 },
        { name: "Agra", lat: 27.1767, lon: 78.0081 },
        { name: "Nashik", lat: 19.9975, lon: 73.7898 },
        { name: "Faridabad", lat: 28.4089, lon: 77.3178 },
        { name: "Meerut", lat: 28.9845, lon: 77.7064 },
        { name: "Rajkot", lat: 22.3039, lon: 70.8022 },
        { name: "Kalyan-Dombivali", lat: 19.2403, lon: 73.1305 },
        { name: "Vasai-Virar", lat: 19.4912, lon: 72.8054 },
        { name: "Varanasi", lat: 25.3176, lon: 82.9739 },
        { name: "Srinagar", lat: 34.0837, lon: 74.7973 },
        { name: "Aurangabad", lat: 19.8762, lon: 75.3433 },
        { name: "Dhanbad", lat: 23.7957, lon: 86.4304 },
        { name: "Amritsar", lat: 31.6340, lon: 74.8723 },
        { name: "Navi Mumbai", lat: 19.0330, lon: 73.0297 },
        { name: "Allahabad", lat: 25.4358, lon: 81.8463 },
        { name: "Ranchi", lat: 23.3441, lon: 85.3096 },
        { name: "Howrah", lat: 22.5958, lon: 88.2636 },
        { name: "Coimbatore", lat: 11.0168, lon: 76.9558 },
        { name: "Jabalpur", lat: 23.1815, lon: 79.9864 },
        { name: "Gwalior", lat: 26.2183, lon: 78.1828 },
        { name: "Vijayawada", lat: 16.5062, lon: 80.6480 },
        { name: "Jodhpur", lat: 26.2389, lon: 73.0243 },
        { name: "Madurai", lat: 9.9252, lon: 78.1198 },
        { name: "Raipur", lat: 21.2514, lon: 81.6296 },
        { name: "Kota", lat: 25.2138, lon: 75.8648 },
        { name: "Chandigarh", lat: 30.7333, lon: 76.7794 },
        { name: "Guwahati", lat: 26.1445, lon: 91.7362 },
        { name: "Solapur", lat: 17.6599, lon: 75.9064 },
        { name: "Hubli-Dharwad", lat: 15.3647, lon: 75.1240 }
    ];

    // Add markers for each city
    cities.forEach(city => {
        L.marker([city.lat, city.lon])
            .addTo(map)
            .bindPopup(`<b>${city.name}</b><br>Vaccination center active`);
    });
});
</script>

<!-- Key stats section -->
<div style="display: flex; justify-content: center; margin-top: 30px;">
    <div style="background-color: #f5f5f5; padding: 20px; border-radius: 8px; max-width: 800px; width: 100%;">
        <h3 style="color:#93c572;">Key Statistics</h3>
        <div style="display: flex; justify-content: space-around; flex-wrap: wrap;">
            <div style="text-align: center; margin: 10px; min-width: 150px;">
                <div style="font-size: 24px; font-weight: bold; color: #93c572;">85%</div>
                <div>Fully Vaccinated</div>
            </div>
            <div style="text-align: center; margin: 10px; min-width: 150px;">
                <div style="font-size: 24px; font-weight: bold; color: #93c572;">92%</div>
                <div>At Least One Dose</div>
            </div>
            <div style="text-align: center; margin: 10px; min-width: 150px;">
                <div style="font-size: 24px; font-weight: bold; color: #93c572;">7.3M</div>
                <div>Daily Doses</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
